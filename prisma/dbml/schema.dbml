//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table User {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId String [unique, not null]
  rcno Int [not null]
  fullName String [not null]
  notifications Notification [not null]
  knowledgeBaseEntries KnowledgeBaseEntry [not null]
  roles UserRole [not null]
  userGroupUsers UserGroupUser [not null]
  ticketsCreated Ticket [not null]
  ticketAssignments TicketAssignment [not null]
  ticketFollowings TicketFollowing [not null]
  checklistCompletions ChecklistItem [not null]
  ticketComments TicketComment [not null]
  ticketAttachments TicketAttachment [not null]
}

Table Notification {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  userId Int [not null]
  user User [not null]
  body String
  readAt DateTime
}

Table KnowledgeBase {
  id Int [pk, increment]
  mode String [not null]
  name String [not null]
  entries KnowledgeBaseEntry [not null]
}

Table KnowledgeBaseEntry {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  userId Int [not null]
  user User [not null]
  knowledgeBaseId Int [not null]
  knowledgeBase KnowledgeBase [not null]
  body String [not null]
  current Boolean [not null]
}

Table UserRole {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  user User [not null]
  role Role [not null]
}

Table UserGroup {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  name String [unique, not null]
  mode String [not null, default: 'Private']
  createdById Int [not null]
  userGroupUsers UserGroupUser [not null]
}

Table UserGroupUser {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  user User [not null]
  userGroupId Int [not null]
  userGroup UserGroup [not null]

  indexes {
    (userId, userGroupId) [unique]
  }
}

Table Ticket {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  createdById Int [not null]
  createdBy User [not null]
  status TicketStatus [not null, default: 'Pending']
  title String [not null]
  body String
  rating Int
  feedback String
  started Boolean [not null, default: false]
  priorityId Int [not null]
  priority Priority [not null]
  categories TicketCategory [not null]
  assignments TicketAssignment [not null]
  checklistItems ChecklistItem [not null]
  followings TicketFollowing [not null]
  comments TicketComment [not null]
  attachments TicketAttachment [not null]
}

Table Priority {
  id Int [pk, increment]
  level Int [not null]
  name String [not null]
  tickets Ticket [not null]
}

Table Category {
  id Int [pk, increment]
  name String [not null]
  tickets TicketCategory [not null]
}

Table TicketCategory {
  id Int [pk, increment]
  ticketId Int [not null]
  ticket Ticket [not null]
  categoryId Int [not null]
  category Category [not null]
  active Boolean [not null, default: true]
}

Table TicketAssignment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  user User [not null]
  ticketId Int [not null]
  ticket Ticket [not null]
  isOwner Boolean [not null]
}

Table ChecklistItem {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  ticketId Int [not null]
  ticket Ticket [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
}

Table TicketFollowing {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  user User [not null]
  ticketId Int [not null]
  ticket Ticket [not null]
}

Table TicketComment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  user User [not null]
  ticketId Int [not null]
  ticket Ticket [not null]
  body String [not null]
  mode String [not null, default: 'Private']
}

Table TicketAttachment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  user User [not null]
  ticketId Int [not null]
  ticket Ticket [not null]
  description String [not null]
  url String [not null]
  mode String [not null, default: 'Private']
}

Enum Role {
  Agent
  Admin
}

Enum TicketStatus {
  Pending
  Open
  Closed
  Solved
  Reopened
}

Ref: Notification.userId > User.id

Ref: KnowledgeBaseEntry.userId > User.id

Ref: KnowledgeBaseEntry.knowledgeBaseId > KnowledgeBase.id

Ref: UserRole.userId > User.id

Ref: UserGroupUser.userId > User.id

Ref: UserGroupUser.userGroupId > UserGroup.id

Ref: Ticket.createdById > User.id

Ref: Ticket.priorityId > Priority.id

Ref: TicketCategory.ticketId > Ticket.id

Ref: TicketCategory.categoryId > Category.id

Ref: TicketAssignment.userId > User.id

Ref: TicketAssignment.ticketId > Ticket.id

Ref: ChecklistItem.ticketId > Ticket.id

Ref: ChecklistItem.completedById > User.id

Ref: TicketFollowing.userId > User.id

Ref: TicketFollowing.ticketId > Ticket.id

Ref: TicketComment.userId > User.id

Ref: TicketComment.ticketId > Ticket.id

Ref: TicketAttachment.userId > User.id

Ref: TicketAttachment.ticketId > Ticket.id